<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Product Debug Display</title>
  <style>
    body {
      font-family: sans-serif;
      padding: 20px;
      background: #f9f9f9;
    }
    img {
      max-width: 300px;
      display: block;
      margin-bottom: 15px;
    }
  </style>
</head>
<body>

<h1 id="name">Loading product...</h1>
<img id="productImage" src="" alt="" />
<pre id="debug"></pre>

<script>
  const params = new URLSearchParams(window.location.search);
  const id = params.get("id");

  if (!id) {
    document.getElementById("name").textContent = "❌ No product ID provided in URL";
    throw new Error("Missing ID");
  }

  fetch(`https://badger-orders.onrender.com/get-product-details/${id}`)
    .then(res => res.json())
    .then(data => {
      console.log(data);
      const result = data?.result?.result;

      if (!result?.sync_product) {
        document.getElementById("name").textContent = "❌ Product not found";
        return;
      }

      const name = result.sync_product.name;
      const image = result.sync_product.thumbnail_url || result.sync_variants?.[0]?.files?.[0]?.preview_url;

      document.getElementById("name").textContent = name;
      document.getElementById("productImage").src = image;
      document.getElementById("productImage").alt = name;
      document.getElementById("debug").textContent = JSON.stringify(result, null, 2);
    })
    .catch(err => {
      document.getElementById("name").textContent = "❌ Error fetching product";
      document.getElementById("debug").textContent = err.message;
    });
</script>

</body>
</html>
